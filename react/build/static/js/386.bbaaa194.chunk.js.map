{"version":3,"file":"static/js/386.bbaaa194.chunk.js","mappings":"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","sources":["components/authenticated.tsx","authenticated/root.tsx","authenticated/index.tsx","components/ghost-btn.tsx","components/layout.tsx"],"sourcesContent":["import { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"../api/auth\";\n\nexport function Authenticated({ children }: { children: JSX.Element }) {\n  const { isAuthenticated } = useAuth();\n  let location = useLocation();\n\n  if (!isAuthenticated) {\n    // Redirect unauthenticated users to the /login page\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  return children;\n}\n\ntype AdminOrPremium =\n  | {\n      admin: true;\n    }\n  | {\n      premium: true;\n    };\nexport type AuthorizedProps = AdminOrPremium & {\n  children: JSX.Element;\n};\n\nexport function Authorized({ children, ...props }: AuthorizedProps) {\n  const { isAuthenticated, user } = useAuth();\n  let location = useLocation();\n\n  if (!isAuthenticated) {\n    // Redirect unauthenticated users to the /login page\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  } else if (\n    (props.hasOwnProperty(\"admin\") && !user?.isAdmin) ||\n    (props.hasOwnProperty(\"premium\") && !user?.isPremium)\n  ) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return children;\n}\n","import { Card, Text } from \"@mantine/core\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"../api/auth\";\n\nexport function Root() {\n  const { user } = useAuth();\n\n  return (\n    <Card>\n      <Text weight={500} size=\"lg\">\n        Hello {user?.name}\n      </Text>\n      <Text size=\"sm\">Root auth</Text>\n\n      <Link to=\"/\">Home</Link>\n    </Card>\n  );\n}\n","import { Route, Routes } from \"react-router-dom\";\nimport { Authenticated } from \"../components/authenticated\";\n\nimport { Layout } from \"../components/layout\";\nimport { Root } from \"./root\";\n\nfunction AuthenticatedLayout() {\n  return (\n    <Authenticated>\n      <Layout />\n    </Authenticated>\n  );\n}\n\nexport default function AuthenticatedApp() {\n  return (\n    <Routes>\n      <Route element={<AuthenticatedLayout />}>\n        <Route path=\"*\" element={<Root />} />\n      </Route>\n    </Routes>\n  );\n}\n","import { UnstyledButton, UnstyledButtonProps } from \"@mantine/core\";\nimport { forwardRef } from \"react\";\n\nexport const GhostButton = forwardRef<HTMLButtonElement, UnstyledButtonProps>(\n  ({ children, ...props }, ref) => {\n    return (\n      <UnstyledButton\n        p={5}\n        sx={(theme) => ({\n          background:\n            theme.colorScheme === \"light\" ? \"initial\" : theme.colors.dark[5],\n          borderWidth: 1,\n          borderStyle: \"solid\",\n          borderColor:\n            theme.colorScheme === \"light\"\n              ? theme.colors.gray[3]\n              : theme.colors.dark[5],\n          borderRadius: theme.radius.md,\n        })}\n        {...props}\n        ref={ref}\n      >\n        {children}\n      </UnstyledButton>\n    );\n  }\n);\n","import {\n  Header,\n  Text,\n  Code,\n  Group,\n  useMantineColorScheme,\n  Center,\n  Menu,\n  Container,\n  Button,\n  Image,\n} from \"@mantine/core\";\nimport { useOs } from \"@mantine/hooks\";\nimport { useSpotlight } from \"@mantine/spotlight\";\nimport { FiSearch, FiSun, FiMoon } from \"react-icons/fi\";\nimport { Link, Outlet, useNavigate } from \"react-router-dom\";\nimport { GhostButton } from \"./ghost-btn\";\nimport { DotsVertical } from \"tabler-icons-react\";\nimport { useAuth, useLogout } from \"../api/auth\";\n\nimport logoLight from \"../assets/logoLight.png\";\nimport logoDark from \"../assets/logoDark.png\";\n\nfunction SpotlightInput() {\n  const spotlight = useSpotlight();\n  const os = useOs();\n\n  return (\n    <GhostButton onClick={spotlight.openSpotlight}>\n      <Group spacing=\"xs\" color={\"dimmed\"} pl={3}>\n        <FiSearch size={14} />\n        <Text color=\"dimmed\" pr={80} size=\"sm\">\n          Search\n        </Text>\n        <Code>{os.endsWith(\"os\") ? \"âŒ˜\" : \"CTRL\"} + K</Code>\n      </Group>\n    </GhostButton>\n  );\n}\n\nfunction ThemeToggle() {\n  const { colorScheme, toggleColorScheme } = useMantineColorScheme();\n  const dark = colorScheme === \"dark\";\n\n  return (\n    <GhostButton\n      title=\"Toggle color scheme\"\n      onClick={() => toggleColorScheme()}\n    >\n      <Center p={3}>{dark ? <FiSun size={16} /> : <FiMoon size={16} />}</Center>\n    </GhostButton>\n  );\n}\n\nfunction Navigation() {\n  const navigate = useNavigate();\n  const { isAuthenticated } = useAuth();\n  const { mutate: logout } = useLogout();\n\n  if (!isAuthenticated) {\n    return (\n      <>\n        <Button component={Link} to=\"/login\" variant=\"outline\">\n          Sign in\n        </Button>\n        <Button component={Link} to=\"/register\">\n          Sign up\n        </Button>\n      </>\n    );\n  }\n\n  return (\n    <Menu\n      control={\n        <GhostButton>\n          <Center p={3}>\n            <DotsVertical size={16} />\n          </Center>\n        </GhostButton>\n      }\n    >\n      <Menu.Item component={Link} to=\"/\">\n        Home\n      </Menu.Item>\n\n      <Menu.Item\n        onClick={() =>\n          logout(undefined, {\n            onSuccess() {\n              navigate(\"/\");\n            },\n          })\n        }\n      >\n        Logout\n      </Menu.Item>\n    </Menu>\n  );\n}\n\nexport function Layout() {\n  const { colorScheme } = useMantineColorScheme();\n  const dark = colorScheme === \"dark\";\n\n  return (\n    <div\n      style={{ minHeight: \"100vh\", display: \"flex\", flexDirection: \"column\" }}\n    >\n      <Header\n        height={64}\n        px=\"md\"\n        style={{ position: \"sticky\", left: 0, right: 0, top: 0 }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            height: \"100%\",\n            justifyContent: \"space-between\",\n            flexWrap: \"wrap\",\n          }}\n        >\n          <Link to=\"/\">\n            <Image src={dark ? logoDark : logoLight} height={32} />\n          </Link>\n\n          <Group spacing=\"sm\">\n            <SpotlightInput />\n            <ThemeToggle />\n            <Navigation />\n          </Group>\n        </div>\n      </Header>\n\n      <Container\n        py=\"md\"\n        style={{\n          width: \"100%\",\n          flex: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n        }}\n      >\n        <Outlet />\n      </Container>\n    </div>\n  );\n}\n"],"names":["Authenticated","children","isAuthenticated","useAuth","location","useLocation","to","state","from","replace","Root","user","Card","Text","weight","size","name","AuthenticatedLayout","AuthenticatedApp","element","path","GhostButton","forwardRef","ref","props","UnstyledButton","p","sx","theme","background","colorScheme","colors","dark","borderWidth","borderStyle","borderColor","gray","borderRadius","radius","md","SpotlightInput","spotlight","useSpotlight","os","useOs","onClick","openSpotlight","Group","spacing","color","pl","pr","Code","endsWith","ThemeToggle","useMantineColorScheme","toggleColorScheme","title","Center","Navigation","navigate","useNavigate","logout","useLogout","mutate","Menu","control","component","Link","undefined","onSuccess","Button","variant","Layout","style","minHeight","display","flexDirection","Header","height","px","position","left","right","top","alignItems","justifyContent","flexWrap","Image","src","logoDark","logoLight","Container","py","width","flex"],"sourceRoot":""}